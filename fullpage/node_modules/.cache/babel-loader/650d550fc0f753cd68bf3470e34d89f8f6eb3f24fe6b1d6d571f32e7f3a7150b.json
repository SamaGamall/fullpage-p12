{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AwsServiceWorkflow = void 0;\nconst promises_1 = require(\"fs/promises\");\nconst error_1 = require(\"../../../error\");\nconst service_workflow_1 = require(\"./service_workflow\");\n/**\n * Device workflow implementation for AWS.\n *\n * @internal\n */\nclass AwsServiceWorkflow extends service_workflow_1.ServiceWorkflow {\n  constructor() {\n    super();\n  }\n  /**\n   * Get the token from the environment.\n   */\n  async getToken() {\n    const tokenFile = process.env.AWS_WEB_IDENTITY_TOKEN_FILE;\n    if (!tokenFile) {\n      throw new error_1.MongoAWSError('AWS_WEB_IDENTITY_TOKEN_FILE must be set in the environment.');\n    }\n    return (0, promises_1.readFile)(tokenFile, 'utf8');\n  }\n}\nexports.AwsServiceWorkflow = AwsServiceWorkflow;","map":{"version":3,"names":["promises_1","require","error_1","service_workflow_1","AwsServiceWorkflow","ServiceWorkflow","constructor","getToken","tokenFile","process","env","AWS_WEB_IDENTITY_TOKEN_FILE","MongoAWSError","readFile","exports"],"sources":["C:\\Users\\sama\\Documents\\fullpage\\node_modules\\mongodb\\src\\cmap\\auth\\mongodb_oidc\\aws_service_workflow.ts"],"sourcesContent":["import { readFile } from 'fs/promises';\n\nimport { MongoAWSError } from '../../../error';\nimport { ServiceWorkflow } from './service_workflow';\n\n/**\n * Device workflow implementation for AWS.\n *\n * @internal\n */\nexport class AwsServiceWorkflow extends ServiceWorkflow {\n  constructor() {\n    super();\n  }\n\n  /**\n   * Get the token from the environment.\n   */\n  async getToken(): Promise<string> {\n    const tokenFile = process.env.AWS_WEB_IDENTITY_TOKEN_FILE;\n    if (!tokenFile) {\n      throw new MongoAWSError('AWS_WEB_IDENTITY_TOKEN_FILE must be set in the environment.');\n    }\n    return readFile(tokenFile, 'utf8');\n  }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,UAAA,GAAAC,OAAA;AAEA,MAAAC,OAAA,GAAAD,OAAA;AACA,MAAAE,kBAAA,GAAAF,OAAA;AAEA;;;;;AAKA,MAAaG,kBAAmB,SAAQD,kBAAA,CAAAE,eAAe;EACrDC,YAAA;IACE,KAAK,EAAE;EACT;EAEA;;;EAGA,MAAMC,QAAQA,CAAA;IACZ,MAAMC,SAAS,GAAGC,OAAO,CAACC,GAAG,CAACC,2BAA2B;IACzD,IAAI,CAACH,SAAS,EAAE;MACd,MAAM,IAAIN,OAAA,CAAAU,aAAa,CAAC,6DAA6D,CAAC;;IAExF,OAAO,IAAAZ,UAAA,CAAAa,QAAQ,EAACL,SAAS,EAAE,MAAM,CAAC;EACpC;;AAdFM,OAAA,CAAAV,kBAAA,GAAAA,kBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}