{"ast":null,"code":"/*!\n * Module dependencies.\n */\n\n'use strict';\n\nconst EventEmitter = require('events').EventEmitter;\nconst Subdocument = require('./subdocument');\nconst utils = require('../utils');\nconst documentArrayParent = require('../helpers/symbols').documentArrayParent;\n\n/**\n * A constructor.\n *\n * @param {Object} obj js object returned from the db\n * @param {MongooseDocumentArray} parentArr the parent array of this document\n * @param {Boolean} skipId\n * @param {Object} fields\n * @param {Number} index\n * @inherits Document\n * @api private\n */\n\nfunction ArraySubdocument(obj, parentArr, skipId, fields, index) {\n  if (utils.isMongooseDocumentArray(parentArr)) {\n    this.__parentArray = parentArr;\n    this[documentArrayParent] = parentArr.$parent();\n  } else {\n    this.__parentArray = undefined;\n    this[documentArrayParent] = undefined;\n  }\n  this.$setIndex(index);\n  this.$__parent = this[documentArrayParent];\n  Subdocument.call(this, obj, fields, this[documentArrayParent], skipId, {\n    isNew: true\n  });\n}\n\n/*!\n * Inherit from Subdocument\n */\nArraySubdocument.prototype = Object.create(Subdocument.prototype);\nArraySubdocument.prototype.constructor = ArraySubdocument;\nObject.defineProperty(ArraySubdocument.prototype, '$isSingleNested', {\n  configurable: false,\n  writable: false,\n  value: false\n});\nObject.defineProperty(ArraySubdocument.prototype, '$isDocumentArrayElement', {\n  configurable: false,\n  writable: false,\n  value: true\n});\nfor (const i in EventEmitter.prototype) {\n  ArraySubdocument[i] = EventEmitter.prototype[i];\n}\n\n/*!\n * ignore\n */\n\nArraySubdocument.prototype.$setIndex = function (index) {\n  this.__index = index;\n  if (this.$__ != null && this.$__.validationError != null) {\n    const keys = Object.keys(this.$__.validationError.errors);\n    for (const key of keys) {\n      this.invalidate(key, this.$__.validationError.errors[key]);\n    }\n  }\n};\n\n/*!\n * ignore\n */\n\nArraySubdocument.prototype.populate = function () {\n  throw new Error('Mongoose does not support calling populate() on nested ' + 'docs. Instead of `doc.arr[0].populate(\"path\")`, use ' + '`doc.populate(\"arr.0.path\")`');\n};\n\n/*!\n * ignore\n */\n\nArraySubdocument.prototype.$__removeFromParent = function () {\n  const _id = this._doc._id;\n  if (!_id) {\n    throw new Error('For your own good, Mongoose does not know ' + 'how to remove an ArraySubdocument that has no _id');\n  }\n  this.__parentArray.pull({\n    _id: _id\n  });\n};\n\n/**\n * Returns the full path to this document. If optional `path` is passed, it is appended to the full path.\n *\n * @param {String} [path]\n * @param {Boolean} [skipIndex] Skip adding the array index. For example `arr.foo` instead of `arr.0.foo`.\n * @return {String}\n * @api private\n * @method $__fullPath\n * @memberOf ArraySubdocument\n * @instance\n */\n\nArraySubdocument.prototype.$__fullPath = function (path, skipIndex) {\n  if (this.__index == null) {\n    return null;\n  }\n  if (!this.$__.fullPath) {\n    this.ownerDocument();\n  }\n  if (skipIndex) {\n    return path ? this.$__.fullPath + '.' + path : this.$__.fullPath;\n  }\n  return path ? this.$__.fullPath + '.' + this.__index + '.' + path : this.$__.fullPath + '.' + this.__index;\n};\n\n/**\n * Given a path relative to this document, return the path relative\n * to the top-level document.\n * @method $__pathRelativeToParent\n * @memberOf ArraySubdocument\n * @instance\n * @api private\n */\n\nArraySubdocument.prototype.$__pathRelativeToParent = function (path, skipIndex) {\n  if (this.__index == null) {\n    return null;\n  }\n  if (skipIndex) {\n    return path == null ? this.__parentArray.$path() : this.__parentArray.$path() + '.' + path;\n  }\n  if (path == null) {\n    return this.__parentArray.$path() + '.' + this.__index;\n  }\n  return this.__parentArray.$path() + '.' + this.__index + '.' + path;\n};\n\n/**\n * Returns this sub-documents parent document.\n * @method $parent\n * @memberOf ArraySubdocument\n * @instance\n * @api public\n */\n\nArraySubdocument.prototype.$parent = function () {\n  return this[documentArrayParent];\n};\n\n/**\n * Returns this subdocument's parent array.\n *\n * #### Example:\n *\n *     const Test = mongoose.model('Test', new Schema({\n *       docArr: [{ name: String }]\n *     }));\n *     const doc = new Test({ docArr: [{ name: 'test subdoc' }] });\n *\n *     doc.docArr[0].parentArray() === doc.docArr; // true\n *\n * @api public\n * @method parentArray\n * @returns DocumentArray\n */\n\nArraySubdocument.prototype.parentArray = function () {\n  return this.__parentArray;\n};\n\n/*!\n * Module exports.\n */\n\nmodule.exports = ArraySubdocument;","map":{"version":3,"names":["EventEmitter","require","Subdocument","utils","documentArrayParent","ArraySubdocument","obj","parentArr","skipId","fields","index","isMongooseDocumentArray","__parentArray","$parent","undefined","$setIndex","$__parent","call","isNew","prototype","Object","create","constructor","defineProperty","configurable","writable","value","i","__index","$__","validationError","keys","errors","key","invalidate","populate","Error","$__removeFromParent","_id","_doc","pull","$__fullPath","path","skipIndex","fullPath","ownerDocument","$__pathRelativeToParent","$path","parentArray","module","exports"],"sources":["C:/Users/sama/Documents/fullpage/node_modules/mongoose/lib/types/ArraySubdocument.js"],"sourcesContent":["/*!\n * Module dependencies.\n */\n\n'use strict';\n\nconst EventEmitter = require('events').EventEmitter;\nconst Subdocument = require('./subdocument');\nconst utils = require('../utils');\n\nconst documentArrayParent = require('../helpers/symbols').documentArrayParent;\n\n/**\n * A constructor.\n *\n * @param {Object} obj js object returned from the db\n * @param {MongooseDocumentArray} parentArr the parent array of this document\n * @param {Boolean} skipId\n * @param {Object} fields\n * @param {Number} index\n * @inherits Document\n * @api private\n */\n\nfunction ArraySubdocument(obj, parentArr, skipId, fields, index) {\n  if (utils.isMongooseDocumentArray(parentArr)) {\n    this.__parentArray = parentArr;\n    this[documentArrayParent] = parentArr.$parent();\n  } else {\n    this.__parentArray = undefined;\n    this[documentArrayParent] = undefined;\n  }\n  this.$setIndex(index);\n  this.$__parent = this[documentArrayParent];\n\n  Subdocument.call(this, obj, fields, this[documentArrayParent], skipId, { isNew: true });\n}\n\n/*!\n * Inherit from Subdocument\n */\nArraySubdocument.prototype = Object.create(Subdocument.prototype);\nArraySubdocument.prototype.constructor = ArraySubdocument;\n\nObject.defineProperty(ArraySubdocument.prototype, '$isSingleNested', {\n  configurable: false,\n  writable: false,\n  value: false\n});\n\nObject.defineProperty(ArraySubdocument.prototype, '$isDocumentArrayElement', {\n  configurable: false,\n  writable: false,\n  value: true\n});\n\nfor (const i in EventEmitter.prototype) {\n  ArraySubdocument[i] = EventEmitter.prototype[i];\n}\n\n/*!\n * ignore\n */\n\nArraySubdocument.prototype.$setIndex = function(index) {\n  this.__index = index;\n\n  if (this.$__ != null && this.$__.validationError != null) {\n    const keys = Object.keys(this.$__.validationError.errors);\n    for (const key of keys) {\n      this.invalidate(key, this.$__.validationError.errors[key]);\n    }\n  }\n};\n\n/*!\n * ignore\n */\n\nArraySubdocument.prototype.populate = function() {\n  throw new Error('Mongoose does not support calling populate() on nested ' +\n    'docs. Instead of `doc.arr[0].populate(\"path\")`, use ' +\n    '`doc.populate(\"arr.0.path\")`');\n};\n\n/*!\n * ignore\n */\n\nArraySubdocument.prototype.$__removeFromParent = function() {\n  const _id = this._doc._id;\n  if (!_id) {\n    throw new Error('For your own good, Mongoose does not know ' +\n      'how to remove an ArraySubdocument that has no _id');\n  }\n  this.__parentArray.pull({ _id: _id });\n};\n\n/**\n * Returns the full path to this document. If optional `path` is passed, it is appended to the full path.\n *\n * @param {String} [path]\n * @param {Boolean} [skipIndex] Skip adding the array index. For example `arr.foo` instead of `arr.0.foo`.\n * @return {String}\n * @api private\n * @method $__fullPath\n * @memberOf ArraySubdocument\n * @instance\n */\n\nArraySubdocument.prototype.$__fullPath = function(path, skipIndex) {\n  if (this.__index == null) {\n    return null;\n  }\n  if (!this.$__.fullPath) {\n    this.ownerDocument();\n  }\n\n  if (skipIndex) {\n    return path ?\n      this.$__.fullPath + '.' + path :\n      this.$__.fullPath;\n  }\n\n  return path ?\n    this.$__.fullPath + '.' + this.__index + '.' + path :\n    this.$__.fullPath + '.' + this.__index;\n};\n\n/**\n * Given a path relative to this document, return the path relative\n * to the top-level document.\n * @method $__pathRelativeToParent\n * @memberOf ArraySubdocument\n * @instance\n * @api private\n */\n\nArraySubdocument.prototype.$__pathRelativeToParent = function(path, skipIndex) {\n  if (this.__index == null) {\n    return null;\n  }\n  if (skipIndex) {\n    return path == null ? this.__parentArray.$path() : this.__parentArray.$path() + '.' + path;\n  }\n  if (path == null) {\n    return this.__parentArray.$path() + '.' + this.__index;\n  }\n  return this.__parentArray.$path() + '.' + this.__index + '.' + path;\n};\n\n/**\n * Returns this sub-documents parent document.\n * @method $parent\n * @memberOf ArraySubdocument\n * @instance\n * @api public\n */\n\nArraySubdocument.prototype.$parent = function() {\n  return this[documentArrayParent];\n};\n\n/**\n * Returns this subdocument's parent array.\n *\n * #### Example:\n *\n *     const Test = mongoose.model('Test', new Schema({\n *       docArr: [{ name: String }]\n *     }));\n *     const doc = new Test({ docArr: [{ name: 'test subdoc' }] });\n *\n *     doc.docArr[0].parentArray() === doc.docArr; // true\n *\n * @api public\n * @method parentArray\n * @returns DocumentArray\n */\n\nArraySubdocument.prototype.parentArray = function() {\n  return this.__parentArray;\n};\n\n/*!\n * Module exports.\n */\n\nmodule.exports = ArraySubdocument;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}