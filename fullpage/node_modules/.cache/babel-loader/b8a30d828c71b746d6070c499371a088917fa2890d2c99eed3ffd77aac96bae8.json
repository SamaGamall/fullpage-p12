{"ast":null,"code":"'use strict';\n\nconst each = require('../helpers/each');\n\n/*!\n * ignore\n */\n\nmodule.exports = function removeSubdocs(schema) {\n  const unshift = true;\n  schema.s.hooks.pre('deleteOne', {\n    document: true,\n    query: false\n  }, function removeSubDocsPreRemove(next) {\n    if (this.$isSubdocument) {\n      next();\n      return;\n    }\n    if (this.$__ == null) {\n      next();\n      return;\n    }\n    const _this = this;\n    const subdocs = this.$getAllSubdocs();\n    each(subdocs, function (subdoc, cb) {\n      subdoc.$__deleteOne(cb);\n    }, function (error) {\n      if (error) {\n        return _this.$__schema.s.hooks.execPost('deleteOne:error', _this, [_this], {\n          error: error\n        }, function (error) {\n          next(error);\n        });\n      }\n      next();\n    });\n  }, null, unshift);\n};","map":{"version":3,"names":["each","require","module","exports","removeSubdocs","schema","unshift","s","hooks","pre","document","query","removeSubDocsPreRemove","next","$isSubdocument","$__","_this","subdocs","$getAllSubdocs","subdoc","cb","$__deleteOne","error","$__schema","execPost"],"sources":["C:/Users/sama/Documents/fullpage/node_modules/mongoose/lib/plugins/removeSubdocs.js"],"sourcesContent":["'use strict';\n\nconst each = require('../helpers/each');\n\n/*!\n * ignore\n */\n\nmodule.exports = function removeSubdocs(schema) {\n  const unshift = true;\n  schema.s.hooks.pre('deleteOne', { document: true, query: false }, function removeSubDocsPreRemove(next) {\n    if (this.$isSubdocument) {\n      next();\n      return;\n    }\n    if (this.$__ == null) {\n      next();\n      return;\n    }\n\n    const _this = this;\n    const subdocs = this.$getAllSubdocs();\n\n    each(subdocs, function(subdoc, cb) {\n      subdoc.$__deleteOne(cb);\n    }, function(error) {\n      if (error) {\n        return _this.$__schema.s.hooks.execPost('deleteOne:error', _this, [_this], { error: error }, function(error) {\n          next(error);\n        });\n      }\n      next();\n    });\n  }, null, unshift);\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,IAAI,GAAGC,OAAO,CAAC,iBAAiB,CAAC;;AAEvC;AACA;AACA;;AAEAC,MAAM,CAACC,OAAO,GAAG,SAASC,aAAaA,CAACC,MAAM,EAAE;EAC9C,MAAMC,OAAO,GAAG,IAAI;EACpBD,MAAM,CAACE,CAAC,CAACC,KAAK,CAACC,GAAG,CAAC,WAAW,EAAE;IAAEC,QAAQ,EAAE,IAAI;IAAEC,KAAK,EAAE;EAAM,CAAC,EAAE,SAASC,sBAAsBA,CAACC,IAAI,EAAE;IACtG,IAAI,IAAI,CAACC,cAAc,EAAE;MACvBD,IAAI,EAAE;MACN;IACF;IACA,IAAI,IAAI,CAACE,GAAG,IAAI,IAAI,EAAE;MACpBF,IAAI,EAAE;MACN;IACF;IAEA,MAAMG,KAAK,GAAG,IAAI;IAClB,MAAMC,OAAO,GAAG,IAAI,CAACC,cAAc,EAAE;IAErClB,IAAI,CAACiB,OAAO,EAAE,UAASE,MAAM,EAAEC,EAAE,EAAE;MACjCD,MAAM,CAACE,YAAY,CAACD,EAAE,CAAC;IACzB,CAAC,EAAE,UAASE,KAAK,EAAE;MACjB,IAAIA,KAAK,EAAE;QACT,OAAON,KAAK,CAACO,SAAS,CAAChB,CAAC,CAACC,KAAK,CAACgB,QAAQ,CAAC,iBAAiB,EAAER,KAAK,EAAE,CAACA,KAAK,CAAC,EAAE;UAAEM,KAAK,EAAEA;QAAM,CAAC,EAAE,UAASA,KAAK,EAAE;UAC3GT,IAAI,CAACS,KAAK,CAAC;QACb,CAAC,CAAC;MACJ;MACAT,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC,EAAE,IAAI,EAAEP,OAAO,CAAC;AACnB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}