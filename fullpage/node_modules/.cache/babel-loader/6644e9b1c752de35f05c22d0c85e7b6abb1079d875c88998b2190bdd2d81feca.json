{"ast":null,"code":"'use strict';\n\nfunction getRelatedSchemaIndexes(model, schemaIndexes) {\n  return getRelatedIndexes({\n    baseModelName: model.baseModelName,\n    discriminatorMapping: model.schema.discriminatorMapping,\n    indexes: schemaIndexes,\n    indexesType: 'schema'\n  });\n}\nfunction getRelatedDBIndexes(model, dbIndexes) {\n  return getRelatedIndexes({\n    baseModelName: model.baseModelName,\n    discriminatorMapping: model.schema.discriminatorMapping,\n    indexes: dbIndexes,\n    indexesType: 'db'\n  });\n}\nmodule.exports = {\n  getRelatedSchemaIndexes,\n  getRelatedDBIndexes\n};\nfunction getRelatedIndexes(_ref) {\n  let {\n    baseModelName,\n    discriminatorMapping,\n    indexes,\n    indexesType\n  } = _ref;\n  const discriminatorKey = discriminatorMapping && discriminatorMapping.key;\n  const discriminatorValue = discriminatorMapping && discriminatorMapping.value;\n  if (!discriminatorKey) {\n    return indexes;\n  }\n  const isChildDiscriminatorModel = Boolean(baseModelName);\n  if (isChildDiscriminatorModel) {\n    return indexes.filter(index => {\n      const partialFilterExpression = getPartialFilterExpression(index, indexesType);\n      return partialFilterExpression && partialFilterExpression[discriminatorKey] === discriminatorValue;\n    });\n  }\n  return indexes.filter(index => {\n    const partialFilterExpression = getPartialFilterExpression(index, indexesType);\n    return !partialFilterExpression || !partialFilterExpression[discriminatorKey];\n  });\n}\nfunction getPartialFilterExpression(index, indexesType) {\n  if (indexesType === 'schema') {\n    const options = index[1];\n    return options && options.partialFilterExpression;\n  }\n  return index.partialFilterExpression;\n}","map":{"version":3,"names":["getRelatedSchemaIndexes","model","schemaIndexes","getRelatedIndexes","baseModelName","discriminatorMapping","schema","indexes","indexesType","getRelatedDBIndexes","dbIndexes","module","exports","_ref","discriminatorKey","key","discriminatorValue","value","isChildDiscriminatorModel","Boolean","filter","index","partialFilterExpression","getPartialFilterExpression","options"],"sources":["C:/Users/sama/Documents/fullpage/node_modules/mongoose/lib/helpers/indexes/getRelatedIndexes.js"],"sourcesContent":["'use strict';\n\nfunction getRelatedSchemaIndexes(model, schemaIndexes) {\n  return getRelatedIndexes({\n    baseModelName: model.baseModelName,\n    discriminatorMapping: model.schema.discriminatorMapping,\n    indexes: schemaIndexes,\n    indexesType: 'schema'\n  });\n}\n\nfunction getRelatedDBIndexes(model, dbIndexes) {\n  return getRelatedIndexes({\n    baseModelName: model.baseModelName,\n    discriminatorMapping: model.schema.discriminatorMapping,\n    indexes: dbIndexes,\n    indexesType: 'db'\n  });\n}\n\nmodule.exports = {\n  getRelatedSchemaIndexes,\n  getRelatedDBIndexes\n};\n\nfunction getRelatedIndexes({\n  baseModelName,\n  discriminatorMapping,\n  indexes,\n  indexesType\n}) {\n  const discriminatorKey = discriminatorMapping && discriminatorMapping.key;\n  const discriminatorValue = discriminatorMapping && discriminatorMapping.value;\n\n  if (!discriminatorKey) {\n    return indexes;\n  }\n\n  const isChildDiscriminatorModel = Boolean(baseModelName);\n  if (isChildDiscriminatorModel) {\n    return indexes.filter(index => {\n      const partialFilterExpression = getPartialFilterExpression(index, indexesType);\n      return partialFilterExpression && partialFilterExpression[discriminatorKey] === discriminatorValue;\n    });\n  }\n\n  return indexes.filter(index => {\n    const partialFilterExpression = getPartialFilterExpression(index, indexesType);\n    return !partialFilterExpression || !partialFilterExpression[discriminatorKey];\n  });\n}\n\nfunction getPartialFilterExpression(index, indexesType) {\n  if (indexesType === 'schema') {\n    const options = index[1];\n    return options && options.partialFilterExpression;\n  }\n  return index.partialFilterExpression;\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,SAASA,uBAAuBA,CAACC,KAAK,EAAEC,aAAa,EAAE;EACrD,OAAOC,iBAAiB,CAAC;IACvBC,aAAa,EAAEH,KAAK,CAACG,aAAa;IAClCC,oBAAoB,EAAEJ,KAAK,CAACK,MAAM,CAACD,oBAAoB;IACvDE,OAAO,EAAEL,aAAa;IACtBM,WAAW,EAAE;EACf,CAAC,CAAC;AACJ;AAEA,SAASC,mBAAmBA,CAACR,KAAK,EAAES,SAAS,EAAE;EAC7C,OAAOP,iBAAiB,CAAC;IACvBC,aAAa,EAAEH,KAAK,CAACG,aAAa;IAClCC,oBAAoB,EAAEJ,KAAK,CAACK,MAAM,CAACD,oBAAoB;IACvDE,OAAO,EAAEG,SAAS;IAClBF,WAAW,EAAE;EACf,CAAC,CAAC;AACJ;AAEAG,MAAM,CAACC,OAAO,GAAG;EACfZ,uBAAuB;EACvBS;AACF,CAAC;AAED,SAASN,iBAAiBA,CAAAU,IAAA,EAKvB;EAAA,IALwB;IACzBT,aAAa;IACbC,oBAAoB;IACpBE,OAAO;IACPC;EACF,CAAC,GAAAK,IAAA;EACC,MAAMC,gBAAgB,GAAGT,oBAAoB,IAAIA,oBAAoB,CAACU,GAAG;EACzE,MAAMC,kBAAkB,GAAGX,oBAAoB,IAAIA,oBAAoB,CAACY,KAAK;EAE7E,IAAI,CAACH,gBAAgB,EAAE;IACrB,OAAOP,OAAO;EAChB;EAEA,MAAMW,yBAAyB,GAAGC,OAAO,CAACf,aAAa,CAAC;EACxD,IAAIc,yBAAyB,EAAE;IAC7B,OAAOX,OAAO,CAACa,MAAM,CAACC,KAAK,IAAI;MAC7B,MAAMC,uBAAuB,GAAGC,0BAA0B,CAACF,KAAK,EAAEb,WAAW,CAAC;MAC9E,OAAOc,uBAAuB,IAAIA,uBAAuB,CAACR,gBAAgB,CAAC,KAAKE,kBAAkB;IACpG,CAAC,CAAC;EACJ;EAEA,OAAOT,OAAO,CAACa,MAAM,CAACC,KAAK,IAAI;IAC7B,MAAMC,uBAAuB,GAAGC,0BAA0B,CAACF,KAAK,EAAEb,WAAW,CAAC;IAC9E,OAAO,CAACc,uBAAuB,IAAI,CAACA,uBAAuB,CAACR,gBAAgB,CAAC;EAC/E,CAAC,CAAC;AACJ;AAEA,SAASS,0BAA0BA,CAACF,KAAK,EAAEb,WAAW,EAAE;EACtD,IAAIA,WAAW,KAAK,QAAQ,EAAE;IAC5B,MAAMgB,OAAO,GAAGH,KAAK,CAAC,CAAC,CAAC;IACxB,OAAOG,OAAO,IAAIA,OAAO,CAACF,uBAAuB;EACnD;EACA,OAAOD,KAAK,CAACC,uBAAuB;AACtC"},"metadata":{},"sourceType":"script","externalDependencies":[]}